!function(){"use strict";window.i18next=window.i18next||{t:function(n){return n}};const n=window.i18next.t.bind(window.i18next);function t(n,t){return document.currentScript.getAttribute("data-"+n)||t}const e=t("page-url",window.location.href.replace(/#.*$/,"")),o=t("add-urls",void 0),r=t("id","webmentions"),s=t("wordcount"),l=t("max-webmentions",30),i=t("prevent-spoofing")?"wm-source":"url",c=t("sort-by","published"),a=t("sort-dir","up"),u=t("comments-are-reactions"),p={"in-reply-to":n("replied"),"like-of":n("liked"),"repost-of":n("reposted"),"bookmark-of":n("bookmarked"),"mention-of":n("mentioned"),rsvp:n("RSVPed"),"follow-of":n("followed")},f={"in-reply-to":"ğŸ’¬","like-of":"â¤ï¸","repost-of":"ğŸ”„","bookmark-of":"â­ï¸","mention-of":"ğŸ’¬",rsvp:"ğŸ“…","follow-of":"ğŸœ"},m={yes:"âœ…",no:"âŒ",interested:"ğŸ’¡",maybe:"ğŸ’­"};function d(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function h(t,e){const o=d(t.author?.name??t.url.split("/")[2]);let r=p[t["wm-property"]]||n("reacted");!e&&t.content&&t.content.text&&(r+=": "+g(t));let s="";t.author&&t.author.photo&&(s=`\n        <img\n          src="${d(t.author.photo)}"\n          loading="lazy"\n          decoding="async"\n          alt="${o}"\n          class="comment-photo"\n        >\n      `);let l="";return t.rsvp&&m[t.rsvp]&&(l=`<sub>${m[t.rsvp]}</sub>`),e?[`\n              <a\n              class="reaction"\n              rel="nofollow ugc"\n              title="${o} ${r}"\n              href="${t[i]}"\n              >\n              ${s}\n              </a>\n          `,`${f[t["wm-property"]]||"ğŸ’¥"} ${l}`]:`\n              <a\n              class="reaction"\n              rel="nofollow ugc"\n              title="${o} ${r}"\n              href="${t[i]}"\n              >\n              ${s}\n              ${f[t["wm-property"]]||"ğŸ’¥"}\n              ${l}\n              </a>\n          `}function $(n){return n.substr(n.indexOf("//"))}function w(n){const t=[],e={};return n.forEach((function(n){const o=$(n.url);e[o]||(t.push(n),e[o]=!0)})),t}function g(n){let t=d(n.content.text);if(s){let n=t.replace(/\s+/g," ").split(" ",s+1);n.length>s&&(n[s-1]+="&hellip;",n=n.slice(0,s),t=n.join(" "))}return t}window.addEventListener("load",(async function(){const t=document.getElementById(r);if(!t)return;const s=[$(e)];o&&o.split("|").forEach((function(n){s.push($(n))}));let p=`https://webmention.io/api/mentions.jf2?per-page=${l}&sort-by=${c}&sort-dir=${a}`;s.forEach((function(n){p+=`&target[]=${encodeURIComponent("http:"+n)}&target[]=${encodeURIComponent("https:"+n)}`}));let f={};try{const n=await window.fetch(p);n.status>=200&&n.status<300?f=await n.json():(console.error("Could not parse response"),new Error(n.statusText))}catch(n){console.error("Request failed",n)}let m=[];const b=[];u&&(m=b);const y={"in-reply-to":m,"like-of":b,"repost-of":b,"bookmark-of":b,"follow-of":b,"mention-of":m,rsvp:m};f.children.forEach((function(n){const t=y[n["wm-property"]];t&&t.push(n)}));let k="";m.length>0&&m!==b&&(k=function(t){return`\n      <ul class="comments">${t.map((t=>{const e=h(t,!0),o=e[0],r=e[1];let s=d(t.url.split("/")[2]);t.author&&t.author.name&&(s=d(t.author.name));const l=`<a class="source" rel="nofollow ugc" href="${t[i]}">${r} ${source}</a>`;let c="name",a=`(${n("mention")})`;return t.name?(c="name",a=t.name):t.content&&t.content.text&&(c="text",a=g(t)),`\n                  <li class="comment">\n                      <p class="title">\n                          ${l} <span class="${c}">${a}</span>\n                      </p>\n          \n                      <div>\n                          ${o}\n                      </div>\n                  </li>\n              `})).join("")}</ul>\n    `}(w(m)));let v="";var x;b.length>0&&(x=w(b),v=`\n      <h2>${n("Reactions")}</h2>\n      <ul class="reacts">${x.map((n=>h(n))).join("")}</ul>\n    `),t.innerHTML=`${k}${v}`}))}();